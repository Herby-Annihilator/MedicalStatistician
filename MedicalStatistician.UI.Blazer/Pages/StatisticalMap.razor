@page "/statisticalMap"

<PageTitle>Стат. карта</PageTitle>



<div class=stat-card-head>
    <h3>Статистическая карта</h3>
    <h4>выбывшего из психиатрического (наркологического) стационара</h4>
</div>

<p>Фамилия <input @str /></p>
<p>Имя <input @str /></p>
<p>Отчество <input @str /></p>

<section>
    <div class="row">
        <div class="col-4 border">
            <p>Пол <select></select></p>
            @*<p>Житель </p>*@
            <p>Место жительства <input></p>
            <p>Код по ОКАТО <input disabled></p>
            <p>Дата рождения <input type="date"></p>
            <p>Вид оплаты <select></select></p>
            <p>Название страховой компании <input></p>
            <p>Страховой полис: серия <input style="width: 20%"/> номер <input  style="width: 30%"/></p>
            <p>Номер стат. карты <input /></p>
            <p>Мед.карта стац. б-го <input /></p>
            <p>Номер отделения <input></p>
            <p>Дата поступления  <input type="date"></p>
            <p>Дата открытия бол-го листа  <input type="date"></p>
            <p>Дата закрытия бол-го листа  <input type="date"></p>
        </div>
        <div class="col-4 border">
            <p>Кем направлен <select></select></p>
            <p>Порядок поступления <select></select></p>
            <p>Решение судьи по ст.35 <select></select></p>
            <p>Откуда поступил <select></select></p>
            <p>Цель направления <select></select></p>
            <p>Диагноз направившего учреждения </p>
                <textarea></textarea>
            <p>Код по МКБ-10 <input /></p>
        </div>
        <div class="col-4 border">
            <p>Заключительный диагноз</p>
                 <textarea></textarea>
            <p>Код по МКБ-10 <input /></p>
            <p>Основной код (+) по МКБ-10 <input /></p>
            <p>Инвалидность при выписке по псих. заболеванию <select></select></p>
            <p>Обследование больного на ВИЧ <select></select></p>
            <p>Выбыл <select></select></p>
            <p>Смерть наступила <select></select></p>
            <p>Основная причина смерти</p>
                 <textarea></textarea>
            <p>Код по МКБ-10 <input /></p>
        </div>
    </div>
</section>


<p class=stat-card-head>Заполняется на больного, находившегося на принудитеьлном лечении в данном стационаре</p>
<div class="table-responsive">
    <p class="fw-bolder">Отметки о начале, окончании и изменении вида принудительного лечения</p>
    <table class="table table-bordered" border="1">
        <thead class="thead-light stat-card-head">
            <tr>
                <th colspan="2">Решение суда о начале принудительного лечения</th>
                <th colspan="6">Решение суда об изменении (продлении) принудительного лечения</th>
                <th>Решение суда об окончании принудительного лечения</th>
            </tr>
            <tr>
                <th>Дата</th>
                <th>Вид</th>

                <th>Дата</th>
                <th>Вид</th>
                <th>Дата</th>
                <th>Вид</th>
                <th>Дата</th>
                <th>Вид</th>

                <th>Дата</th>
            </tr>           
        </thead>
        <tbody>
            @foreach (var item in collection)
            {
                <tr class="stat-card-head fw-normal">
                    <th>@item.Str1</th>
                    <th>@item.Str2</th>
                    <th>@item.Str3</th>
                    <th>@item.Str1</th>
                    <th>@item.Str2</th>
                    <th>@item.Str3</th>
                    <th>@item.Str1</th>
                    <th>@item.Str2</th>
                    <th>@item.Str3</th>
                </tr>
            }
        </tbody>
    </table>
</div>

<!--Пункты 29 и 30-->
<p>В случае окончания принудительного лечения <select></select> </p>
<p>Дата окончания принудительного лечения <input type="date"></p>

<h5 class=stat-card-head>Дополнительные сведения о больном</h5>
<section>
    <div class="row">
        <div class="col-4 border">
            <p>Дата начала заболевания <input type="date"></p>
            <p>Дата обращения к психиатру (наркологу) впервые в жизни <input type="date"></p>
            <p>Вид амбулаторного наблюдения <select></select></p>
            <p>Дата предыдущей выписки из психиатрич. или наркологич. стац. <input type="date"></p>
            <p>Число дней работы в ЛТМ <input /></p>
            <p>Число дней лечебных отпусков (за период госпитализации)</p>
            <p>дней <input style="width: 20%"/> отпусков <input style="width: 20%"/></p>
        </div>
        <div class="col-4 border">
            <p>Сопутствующее психическое (наркологическое) заболевание</p>
                <textarea></textarea>
            <p>Код по МКБ-10 F <input /></p>
            <p>Сопутствующее соматическое заболевание</p>
            <p>Код по МКБ-10  <input /></p>
            <p>Инвалидность по общему заболеванию <select></select></p>
            <p>Инвалид ВОВ <input type="checkbox"></p>
            <p>Участник ВОВ <input type="checkbox"></p>
            <p>Образование <select></select></p>
        </div>
        <div class="col-4 border">
            <p>Учится <input type="checkbox"></p>
            <p>Источник средств существования <select></select></p>
            <p>Проживает <select></select></p>
            <p>Условия проживания <select></select></p>
            <p>Исход заболевания <select></select></p>
        </div>
    </div>
</section>


<h5 class=stat-card-head>Сведения об употреблении психоактивных веществ</h5>
<div class="table-responsive">
    <p class="fw-bolder">Возраст начала употребления психоактивных веществ</p>
    <table class="table table-bordered" border="1">
        <thead class="thead-light stat-card-head">
            <tr>
                <th rowspan="2">Наименование психоактивного вещества</th>
                <th colspan="4">Число полных лет</th>
            </tr>
            <tr>
                <th>курение</th>
                <th>прием внутрь</th>
                <th>внутривенно</th>
                <th>прочее</th>
            </tr>           
        </thead>
        <tbody>
            @foreach (var item in collection)
            {
                <tr class="stat-card-head fw-normal">
                    <th>@item.Str1</th>
                    <th>@item.Str2</th>
                    <th>@item.Str3</th>
                    <th>@item.Str1</th>
                    <th>@item.Str2</th>
                </tr>
            }
        </tbody>
    </table>
</div>

<div class="table-responsive">
    <p class="fw-bolder">Употребление психоактивных веществ на момент госпитализации</p>
    <table class="table table-bordered" border="1">
         <thead class="thead-light stat-card-head">
            <tr>
                <th>Вид вещества</th>
                <th>Наименование психоактивного вещества</th>
                <th>Курение</th>
                <th>Прием внутрь</th>
                <th>Внутривенно</th>
                <th>Прочее</th>
            </tr>           
        </thead>
        <tbody>
            @foreach (var item in collection)
            {
                <tr class="stat-card-head fw-normal">
                    <th>@item.Str1</th>
                    <th>@item.Str2</th>
                    <th>@item.Str3</th>
                    <th>@item.Str1</th>
                    <th>@item.Str2</th>
                    <th>@item.Str3</th>
                </tr>
            }
        </tbody>
    </table>
</div>

<p>Использование чужих шприцов, игл, приспособлений в течении последнего года <input type="checkbox"></p>
<p>Проживание с потребителем психоактивных веществ <input type="checkbox"></p>
<p>Полученный вид наркологической помощи в данном учреждении <select></select></p>

<!--Кнопка сохранения-->
<button class="btn btn-primary" @onclick="Save">Сохранить</button>




@code {

    List<SmthClass> collection;
    class SmthClass
    {
        public string Str1 { get; set; }
        public string Str2 { get; set; }
        public string Str3 { get; set; }

        public SmthClass(string str1, string str2, string str3)
        {
            Str1 = str1;
            Str2 = str2;
            Str3 = str3;
        }
    }

    double testcount = 0;
    string str = "Иванов Иван Иванович";

    void Save() => testcount = Math.Cos(testcount);

    /// <summary>
    /// Инициализация до отрисовки
    /// </summary>
    /// <returns></returns>
    protected async override Task OnInitializedAsync()
    {
        collection = new List<SmthClass>();
        collection.Add(new SmthClass("1", "2", "3"));
        collection.Add(new SmthClass("4", "5", "6"));
        collection.Add(new SmthClass("7", "8", "9"));
    }

    // временные данные
}
